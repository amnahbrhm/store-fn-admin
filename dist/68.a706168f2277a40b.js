"use strict";(self.webpackChunkstore_fn_admin=self.webpackChunkstore_fn_admin||[]).push([[68],{2068:(L,a,r)=>{r.r(a),r.d(a,{UsersModule:()=>T});var o=r(6814),l=r(5219),e=r(4946),p=r(8064),g=r(7477);let f=(()=>{class s{constructor(t){this.http=t}getUsers(t){const n=(0,p.B)(t);return this.http.get(`users${n}`)}changeRole(t){return this.http.post("users/changeRole",t)}delete(t){const n=(0,p.B)(t);return this.http.delete(`users${n}`)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(g.O))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var d=r(3904),x=r(707),u=r(1122);function U(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"div",8)(3,"div",9),e._uU(4),e.TgZ(5,"i",10),e.NdJ("click",function(c){const h=e.CHM(t),M=h.$implicit,_=h.index,m=e.oxw();return e.MAs(8).toggle(c),m.selectedUser=M,e.KtG(m.index=_)}),e.qZA()(),e.TgZ(6,"div",11),e._uU(7),e.qZA(),e.TgZ(8,"div",12),e._uU(9),e.qZA()(),e._UZ(10,"div",13),e.qZA(),e.BQk()}if(2&s){const t=i.$implicit;e.xp6(4),e.hij(" Role: ",t.role," "),e.xp6(3),e.hij(" Name: ",t.user_name," "),e.xp6(2),e.hij(" Email: ",t.email," ")}}function v(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.loadUsers())}),e.qZA()}}const b=function(){return{width:"50vw"}};let y=(()=>{class s{constructor(t,n){this.confirmationService=t,this.service=n,this.list=[],this.index=-1,this.hasNextPage=!1,this.pagination=6,this.page=1}ngOnInit(){this.loadUsers(),this.items=[{label:"change role",icon:"pi pi-refresh",command:()=>{this.confirm("role-change")}},{label:"Delete",icon:"pi pi-times",command:()=>{this.confirm("delete")}}]}loadUsers(){this.service.getUsers({pagination:this.pagination,page:this.page}).subscribe(t=>{this.list=[...this.list,...t.users],this.hasNextPage=t.hasNextPage,this.page++})}confirm(t){"delete"===t&&this.deleteUser(),"role-change"===t&&this.changeRole()}deleteUser(){this.confirmationService.confirm({message:`Are you sure that you want to delete ${this.selectedUser.user_name} ?`,header:"Delete User",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delete({id:this.selectedUser._id}).subscribe(t=>{this.list.splice(this.index,1)})},reject:()=>{}})}changeRole(){this.confirmationService.confirm({message:`Are you sure that you want to change role for ${this.selectedUser.user_name} ?`,header:"Change Role",icon:"pi pi-exclamation-triangle",accept:()=>{const t="admin"===this.selectedUser.role?"user":"admin";this.service.changeRole({id:this.selectedUser._id,role:t}).subscribe(n=>{this.list[this.index].role=t})},reject:()=>{}})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(l.YP),e.Y36(f))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-list"]],features:[e._Bn([l.YP])],decls:10,vars:7,consts:[[1,"flex","align-items-center","justify-content-between","pb-3"],[1,"flex","flex-wrap","gap-4"],[4,"ngFor","ngForOf"],[1,"pt-5"],["pButton","","label","Load more","class","p-button-success",3,"click",4,"ngIf"],["appendTo","body",3,"model","popup"],["menu",""],[1,"user-card"],[1,"pl-3","pr-3","pt-5"],[1,"text-xs","flex","justify-content-between"],[1,"pi","pi-ellipsis-v",3,"click"],[1,"text-sm","pt-3","pb-3"],[1,"text-sm"],[1,"footer"],["pButton","","label","Load more",1,"p-button-success",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Users List"),e.qZA()(),e.TgZ(3,"div",1),e.YNc(4,U,11,3,"ng-container",2),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,v,1,0,"button",4),e.qZA(),e._UZ(7,"p-menu",5,6)(9,"p-confirmDialog")),2&t&&(e.xp6(4),e.Q6J("ngForOf",n.list),e.xp6(2),e.Q6J("ngIf",n.hasNextPage),e.xp6(1),e.Q6J("model",n.items)("popup",!0),e.xp6(2),e.Akn(e.DdM(6,b)))},dependencies:[o.sg,o.O5,d.Q,x.Hq,u.v2],styles:[".user-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;height:200px;width:250px;border:.5px solid rgb(208,208,208);border-radius:16px}.user-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:15px;width:100%;border-radius:16px 16px 0 0;background-color:initial}.user-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:40px;width:100%;border-radius:0 0 16px 16px;background:url(bg.b7ab44db6f69919b.jpg)}"]}),s})(),C=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-add"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"user-add works!"),e.qZA())}}),s})();var Z=r(4670);const A=[{path:"",component:y,pathMatch:"full"},{path:"add",component:C}];let T=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[o.ez,d.D,u.$9,Z.Bz.forChild(A)]}),s})()}}]);